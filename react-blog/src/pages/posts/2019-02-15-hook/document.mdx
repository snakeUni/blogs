## why React Hooks

React åœ¨16.8.0çš„æ—¶å€™æ­£å¼å‘å¸ƒäº†[Hook](https://reactjs.org/docs/hooks-intro.html), åŸºç¡€çš„hookæœ‰`useState`, `useReducer`, `useEffect`

### Mouse Position
è¿™æ˜¯ä¸€ä¸ªè·å–é¼ æ ‡ä½ç½®çš„ğŸŒ°, [mousePosition](https://codesandbox.io/s/xj0ppk0pzw)
```jsx
class MousePostion extends React.Component {
  state = {
    x: 0,
    y: 0
  }

  componentDidMount() {
    window.addEventListener('mousemove', this.mousemove)
  }

  componentWillUnmount() {
    window.removeEventListener('mousemove', this.mousemove)
  }

  mousemove = (e) => {
    this.setState({ x: e.clientX, y: e.clientY })
  }

  render() {
    const { x, y } = this.state
    return (
      <span>
        Mouse X: { x } Mouse Y: { y }
      </span>
    )
  }
}
```
å¦‚æœæˆ‘ä»¬æƒ³åœ¨å…¶ä»–çš„åœ°æ–¹å¤ç”¨è¯¥ç»„ä»¶ï¼Œå°±è¦é‡å†™ç›¸åŒçš„ä»£ç   

å¦‚æœæˆ‘ä»¬æƒ³æ‹¿åˆ°x, yçš„æ—¶å€™åœ¨å»åšå…¶ä»–çš„äº‹æƒ…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å»ä¿®æ”¹è¿™ä¸ªä»£ç ã€‚è¿™ä¸ªè¡Œä¸ºå°±è¢«é™åˆ¶åœ¨è¿™ä¸ªç»„ä»¶é‡Œé¢äº†ã€‚

### HOC
ç”¨hocæ¥ä¿®æ”¹æ­¤ç»„ä»¶ï¼ŒæŠŠx, yä½œä¸ºpropsä¼ ç»™ä»»ä½•éœ€è¦ç”¨x, yçš„ç»„ä»¶
```jsx
function withMouseHoc(ComponentWrap) {
  return class Mouse extends React.Component {
    state = {
      x: 0,
      y: 0
    };

    componentDidMount() {
      window.addEventListener("mousemove", this.mousemove);
    }

    componentWillUnmount() {
      window.removeEventListener("mousemove", this.mousemove);
    }

    mousemove = e => {
      this.setState({ x: e.clientX, y: e.clientY });
    };
    render() {
      return <ComponentWrap {...this.state} />;
    }
  };
}

class MouseHocDemo extends React.Component {
  render() {
    const { x, y } = this.props;
    return (
      <div>
        MouseHoc X: {x}, MouseHoc Y: {y}
      </div>
    );
  }
}
```
æ­¤æ—¶æˆ‘ä»¬æŠŠé¼ æ ‡çš„è¡Œä¸ºé€šè¿‡hocè¿›è¡Œäº†ä¸€æ¬¡å°è£…ï¼Œä»¥åéœ€è¦ç”¨åˆ°è¯¥è¡Œä¸ºçš„éƒ½å¯ä»¥å®Œå…¨å¤ç”¨ã€‚

è™½ç„¶è¿™æ˜¯æ›´å¤šçš„ä»£ç ï¼Œä½†æˆ‘ä»¬æ­£åœ¨æœç€æ­£ç¡®çš„æ–¹å‘å‰è¿›ã€‚å®ƒä¸å†ä¸è®¢é˜…è¡Œä¸ºç´§å¯†è€¦åˆã€‚

å¦‚æœæˆ‘ä»¬æƒ³æ¸²æŸ“ä¸€äº›ä¸åŒçš„ä¸œè¥¿å‘¢?æˆ‘ä»¬æ€»æ˜¯éœ€è¦åšä¸€ä¸ªæ–°çš„ç»„ä»¶å—?
### render props
ç”¨render propsæ¥æ”¹å†™
```jsx
class MouseRenderProps extends React.Component {
  state = {
    x: 0,
    y: 0
  };

  componentDidMount() {
    window.addEventListener("mousemove", this.mousemove);
  }

  componentWillUnmount() {
    window.removeEventListener("mousemove", this.mousemove);
  }

  mousemove = e => {
    this.setState({ x: e.clientX, y: e.clientY });
  };
  render() {
    const { children } = this.props;
    return children({ ...this.state });
  }
}

class MouseRenderPropsDemo extends React.Component {
  render() {
    return (
      <MouseRenderProps>
        {({ x, y }) => {
          return (
            <div>
              MouseRenderProps X: {x}, MouseRenderProps Y: {y}
            </div>
          );
        }}
      </MouseRenderProps>
    );
  }
}
```
renderPropsä¹Ÿå¯ä»¥è§£å†³ä¹‹å‰mouseçš„é—®é¢˜,å’ŒHOCå…·æœ‰ç›¸åŒçš„åŠŸæ•ˆ

è¿™ç§ç»†å¾®çš„å·®åˆ«æœ‰ä¸€äº›éå¸¸æ£’çš„å¥½å¤„
ç°åœ¨ï¼Œæä¾›xå’Œyçš„åŠŸèƒ½éå¸¸æ˜æ˜¾ï¼Œæ‚¨è¿˜å¯ä»¥è½»æ¾åœ°é‡å‘½åå®ƒä»¬ï¼Œä»¥é˜²æ­¢åç§°å†²çªã€‚  
æˆ‘ä»¬å¯¹æ¸²æŸ“æœ‰çµæ´»çš„æ§åˆ¶ã€‚æˆ‘ä»¬ä¸éœ€è¦åˆ›å»ºæ–°çš„ç»„ä»¶ï¼Œå¦‚æœæˆ‘ä»¬å†³å®šè¿™æ ·åšï¼Œå®ƒåªæ˜¯ä¸€ä¸ªç®€å•çš„å¤åˆ¶ç²˜è´´ã€‚  
æ‚¨å¯ä»¥åœ¨ç»„ä»¶å‘ˆç°å‡½æ•°ä¸­ç›´æ¥çœ‹åˆ°æ‰€æœ‰è¿™äº›ã€‚æ–°å¼€å‘äººå‘˜å¾ˆå®¹æ˜“è¯†åˆ«å®ƒã€‚  
è¿™ç§æ¨¡å¼çš„ä¸»è¦é—®é¢˜æ˜¯ï¼Œæ‚¨çš„ç»„ä»¶å¿…é¡»åœ¨å®ƒä»¬çš„å‘ˆç°ä¸­åµŒå¥—è®¸å¤šè¿™æ ·çš„ç»„ä»¶ã€‚ä¸€æ—¦ä½ å¼€å§‹åµŒå¥—å¤šä¸ªæ¸²æŸ“ç»„ä»¶ï¼Œä½ å°±å¾ˆéš¾æ¨æ–­å‡ºå‘ç”Ÿäº†ä»€ä¹ˆã€‚  
åŒæ—¶ï¼Œè¿™ä¹Ÿé€ æˆäº†ä¸€ç§é”™è¯¯çš„ç­‰çº§è§‚å¿µã€‚ä»…ä»…å› ä¸ºä¸€ä¸ªè¡Œä¸ºâ€œåµŒå¥—â€åœ¨å¦ä¸€ä¸ªè¡Œä¸ºä¹‹ä¸‹ï¼Œå¹¶ä¸æ„å‘³ç€å®ƒä¾èµ–äºçˆ¶è¡Œä¸º

*å¦‚æœæœ‰ä¸€ç§æ–¹æ³•å¯ä»¥æ‹¥æœ‰æ‰€æœ‰è¿™äº›èƒ½åŠ›ï¼Œä»¥ä¸€ç§å£°æ˜æ–¹å¼ã€‚ğŸ‘€*

### Hook
ç”¨ hookæ¥æ”¹å†™
```jsx
function useMousePosition() {
  const [position, setPosition] = useState({ x: 0, y: 0 });

  useEffect(
    () => {
      const mousemove = e => {
        setPosition({ x: e.clientX, y: e.clientY });
      };
      window.addEventListener("mousemove", mousemove);
      return () => {
        window.removeEventListener("mousemove", mousemove);
      };
    },
    [setPosition]
  );
  return position;
}

function MouseHook() {
  const position = useMousePosition();
  return (
    <div>
      MouseHook X: {position.x}, MouseHook Y: {position.y}
    </div>
  );
}
```
è¿™å°±æ˜¯æˆ‘æƒ³è¦çš„ä¸€åˆ‡ã€‚

ä¸ä»…è¡Œä¸ºåœ¨å®ƒè‡ªå·±æ•´æ´çš„å°ç¨‹åºåŒ…ä¸­ï¼ŒuseEffectè¿˜é˜»æ­¢å®ƒåˆ†æ•£åœ¨ä¸‰ä¸ªä¸åŒçš„ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­
ç»„ä»¶ä»å“ªé‡Œè·å–æ•°æ®æ˜¯éå¸¸æ¸…æ™°çš„ï¼Œå®ƒè¢«æ•´é½åœ°æ”¾ç½®åœ¨renderå‡½æ•°ä¸­ã€‚
æ— è®ºæˆ‘éœ€è¦å¼•å…¥å¤šå°‘è¿™æ ·çš„ä»£ç ï¼Œæˆ‘çš„ä»£ç éƒ½ä¸ä¼šå˜å¾—è¶Šæ¥è¶ŠåµŒå¥—ã€‚

**ä½†æ˜¯ å½“ä½¿ç”¨hooksçš„æ—¶å€™ä¹Ÿè¦éµå®ˆä¸€äº›[åŸåˆ™](https://reactjs.org/docs/hooks-rules.html)**

### Final
è™½ç„¶hooksçš„å‡ºç°å¸¦æ¥äº†å¾ˆå¤šçš„ä¾¿åˆ©ï¼Œä½†æ˜¯å…ˆä¸è¦æ€¥ç€å»æ”¹å†™å·²æœ‰é¡¹ç›®ä¸­çš„ä»£ç ï¼Œ
æœ‰å¯èƒ½åç»­éƒ¨åˆ†hookè¿˜ä¼šå‘ç”Ÿæ”¹å˜ï¼Œä¹Ÿæœ‰å¯èƒ½è¿˜å­˜åœ¨æŸäº›é—®é¢˜ï¼Œä¹Ÿæœ‰å¯èƒ½æŸäº›æƒ…å†µä¸‹æ˜¯hookæ— æ³•å¤„ç†çš„ã€‚

è™½ç„¶å¯¹äºhookçš„åˆ©å¼Šæˆ‘è¿˜ä¸å¤ªç†è§£ï¼Œä½†æ˜¯æˆ‘æ•¢äºå»å°è¯•ï¼Œå¦‚æœæœ‰æ„¿æ„ä¸€èµ·ç©çš„ï¼Œä¹Ÿå¯ä»¥è”ç³»æˆ‘ã€‚

