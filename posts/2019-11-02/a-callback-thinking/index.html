<!doctype html><html lang="en"><head><meta charset="utf-8"/><link rel="shortcut icon" href="/fa.jpg"/><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"/><meta name="theme-color" content="#000000"/><link rel="manifest" href="/manifest.json"/>
    <title>react callback thinking</title>
    <link rel="canonical" href="/posts/2019-11-02/a-callback-thinking" />
    <link rel="stylesheet" href="/static/css/1.27c8494b.chunk.css" />
  <link href="/static/css/main.0e6724e3.chunk.css" rel="stylesheet"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><div class="BlogLayout_container__1wjbv"><div class="
        LoadingIndicator_LoadingIndicator__LXZCC
        
        undefined
      "></div><header><h3 class="BlogLayout_title__U0zfd"><a class=" " href="/">lanyincao</a></h3></header><main><article><header class="BlogPostLayout_header__6lPZ1"><h1 class="BlogPostLayout_title__1egAZ"><a class=" " href="/posts/2019-11-02/a-callback-thinking/">react callback thinking</a></h1><small><time dateTime="Fri, 01 Nov 2019 16:00:00 GMT">November 2, 2019</time> <!-- -->•<!-- --> <ul class="ArticleMeta_tags__30Wbg"><li><a class=" " href="/tags/react/">react</a></li><li><a class=" " href="/tags/key/">key</a></li></ul> <!-- -->•<!-- --> <span>☕️<!-- --> <!-- -->3<!-- --> min read</span></small></header><div class="BlogPostLayout_content__1CRXP"><p>首先为什么会想到写这篇文章，写这篇文章的由来主要是内部的一个项目导致的，这个引起了我的一些思考。那到底是什么呢？</p><h1 id="目录">目录</h1><ul><li>为什么会出现这种场景</li><li>如何解决这个场景</li><li>react 内部是如何运作的才会导致这种场景的出现</li></ul><h2 id="为什么会出现这种场景">为什么会出现这种场景</h2><p>在使用 <code>React</code> 的时候，父子间是如何通信的，我相信基本上所有人都是知道的，父传递数据给子是通过 <code>props</code> 的形式</p><pre><code class="language-jsx" data-language="jsx" data-highlighted-line-numbers="2"><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="highlighted-line">  <span class="token keyword">return</span> <span class="token operator">&lt;</span><span class="token constant">B</span> name<span class="token operator">=</span><span class="token string">'lanyincao'</span> age<span class="token operator">=</span><span class="token string">'18'</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span></span><span class="token punctuation">}</span>
</code></pre><p>此时 B 组件接受 <code>name</code> 和 <code>age</code> 这两个 props, 在 B 组件内部就可以拿到这两个数据进行相应的处理操作。那么子如何把数据传递给父呢？我们知道应该回调的方式</p><pre><code class="language-jsx" data-language="jsx" data-highlighted-line-numbers="7,8,9"><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span><span class="token constant">B</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> onChange <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="highlighted-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>onChange<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="highlighted-line">    <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token string">'XXXX'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="highlighted-line">  <span class="token punctuation">}</span></span>  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>在 B 组件内部调用 A 组件传递下来的 <code>onChange</code> 回调，通过 <code>onChange</code> 再把 B 中的数据反传回去。基本上父子通信就可以很快的完成了。至于其他的方法我在这里不做过多的描述，主要是为了引出
另一个问题。</p><p>此时有这样的一个组件的结构。</p><pre><code class="language-jsx" data-language="jsx" data-highlighted-line-numbers="5,6,7,8"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> getAge<span class="token punctuation">,</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'render Parent component'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>age<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="highlighted-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>getAge<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="highlighted-line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'getAge:'</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="highlighted-line">    <span class="token function">getAge</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="highlighted-line">  <span class="token punctuation">}</span></span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Node</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> age <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'render Node component'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'age:'</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'render Test component'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> ageRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> forceUpdate<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>state <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'update Test component'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Parent getAge<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">age</span> <span class="token operator">=></span> <span class="token punctuation">(</span>ageRef<span class="token punctuation">.</span>current <span class="token operator">=</span> age<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>Node age<span class="token operator">=</span><span class="token punctuation">{</span>ageRef<span class="token punctuation">.</span>current<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Parent<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

ReactDom<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Test <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p><code>Test</code> 组件有一个 <code>children</code> 组件叫做 <code>Parent</code>, 在 <code>Parent</code> 组件内部调用了 <code>getAge</code> 方法, <code>getAge</code> 方法就是一个回调, 通过 <code>getAge</code> 方法把
age 返回出去给父组件使用。那么不妨在仔细看下 <code>Test</code> 组件，在调用 <code>getAge</code> 方法的时候把 age 挂到 ref 上，我们知道在函数中 ref 可以当做和 class 中的 this
一样去使用，所以在 render Parent 的时候， ageRef.current 就会被赋予新的值, 那么 ageRef.current 被赋予新的值后，是否此时 <code>Node</code> 组件获取到的 age 就是新的值呢？
不妨看一下输出</p><div><img src="/static/media/hook-1.5eadc3d4.jpg"/></div><p>可以看出在 <code>Node</code> 组件中, 此时 age 是 null, 对啊为什么会是 null 呢，不应该啊，如果是 18 应该多好啊。有可能在 <code>Node</code> 组件内部，会使用数字的一些方法，那么如果是 null,
这样就会导致页面白屏了，就会造成严重的问题。</p><h2 id="如何解决这个场景">如何解决这个场景</h2><p>上面出现的 age is null, 这样的情况，应该如何去解决呢？ 首先我们知道 ageRef 是一个拥有 current 属性的一个对象，那么此时不妨把 ageRef 传递到子组件中，在子组件中使用
<code>ageRef.current</code> 来获取到新的 age 的值，好了不妨试一下！！！</p><ul><li>传递引用到子组件中</li></ul><pre><code class="language-jsx" data-language="jsx" data-highlighted-line-numbers="13,22"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> getAge<span class="token punctuation">,</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>age<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>getAge<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'getAge:'</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">getAge</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">ResovedNode</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> age <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="highlighted-line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'age:'</span><span class="token punctuation">,</span> age<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span></span>  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">ResovedTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ageRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Parent getAge<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">age</span> <span class="token operator">=></span> <span class="token punctuation">(</span>ageRef<span class="token punctuation">.</span>current <span class="token operator">=</span> age<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
<span class="highlighted-line">      <span class="token operator">&lt;</span>ResovedNode age<span class="token operator">=</span><span class="token punctuation">{</span>ageRef<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>Parent<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>现在传递到 Node 组件中的 age 是 <code>ageRef.current</code>, 在看看输出</p><div><img src="/static/media/hook-2.a9921c74.jpg"/></div><p>此时在 <code>Node</code> 组件中获取到的 ageRef.current 就是正确的值了，为什么，因为在 Parent 中的 ageRef 和传递下去的是同一个引用，所以在 render parent 的时候，
调用了 getAge 此时 ageRef.current 被修改了。那么当渲染到 Node 的时候，获取到的 <code>ageRef</code> 就可以拿到在 Parent 组件中的 age 的值了。</p><p><a class=" " href="https://codesandbox.io/s/yici-huidiaodefenxi-y20cf">try it in codesandbox</a></p><ul><li>传递函数到子组件中</li></ul><p>函数是具有懒执行也就是延迟执行的作用，我们可以在任何时候控制函数的执行。所以如何传递一个函数到子组件中是否也可以达到一样的效果呢？</p><pre><code class="language-jsx" data-language="jsx" data-highlighted-line-numbers="13,22"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> getAge<span class="token punctuation">,</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>age<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>getAge<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'getAge:'</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">getAge</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">ResovedNode2</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> age <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="highlighted-line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'age:'</span><span class="token punctuation">,</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>  <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">ResovedTest2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> ageRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Parent getAge<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">age</span> <span class="token operator">=></span> <span class="token punctuation">(</span>ageRef<span class="token punctuation">.</span>current <span class="token operator">=</span> age<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
<span class="highlighted-line">      <span class="token operator">&lt;</span>ResovedNode2 age<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> ageRef<span class="token punctuation">.</span>current<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>Parent<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>此时传递给 Node 的 age 是一个函数 <code>() =&gt; ageRef.current</code>, 这个函数返回了 <code>ageRef.current</code>, 因为现在传递给 Node 的是一个函数，而这个函数的执行时机是在 Node 组件的
render 时机，所以在 Node 中总是可以拿到新的值。不妨看一下数据</p><div><img src="/static/media/hook-3.25ce9ca0.jpg"/></div><p>可以看出此时输出的 age 都是正确的。</p><p><a class=" " href="https://codesandbox.io/s/yici-huidiaodefenxi-y20cf">try it in codesandbox</a></p><h2 id="react-内部是如何运作的才会导致这种场景的出现">react 内部是如何运作的才会导致这种场景的出现</h2><p>在上面的场景中已经知道有两种解决办法，那么不妨考虑一下为什么第一种是不行的呢？那么不妨对 react 进行调试一下就能知道为什么了</p><p>首先在 react 的源码的 createElement 的内部打印一下</p><pre><code class="language-jsx" data-language="jsx" data-highlighted-line-numbers=""><span class="token keyword">function</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> config<span class="token punctuation">,</span> children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> propName<span class="token punctuation">;</span> <span class="token comment">// Reserved names are extracted</span>

  <span class="token operator">...</span>some

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'createElement-'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">type:</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token string">'props:'</span><span class="token punctuation">,</span> props<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token function">ReactElement</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> key<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> self<span class="token punctuation">,</span> source<span class="token punctuation">,</span> ReactCurrentOwner<span class="token punctuation">.</span>current<span class="token punctuation">,</span> props<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>为什么要在 <code>createElement</code> 里面打印呢，我们知道 React 会调用 <code>React.createElement</code> 返回 ReactElment 对象，调用的是在 <code>babel</code> 插件中做的，具体
可以去看一下插件。可以主动调用 <code>React.createElement</code>, 也可以写成 <code>JSX</code> 的形式， React 会自行解析。那不妨看一下此时的输出</p><div><img src="/static/media/hook-4.8834fdd9.jpg"/></div><p>从输入可以看出在调用 <code>createElement</code> 的时候, 此时 Node 的 props 已经确定了， 此时的 age 是 null, 所以当 render Node 组件的时候，此时的 age 就是 null,
这就是为什么拿不到最新的值的原因了，因为 <code>createElement</code> 的时候已经确定了这个 props 的值。如果后续发生 <code>update</code>, 会继续调用 <code>createElement</code>, 此时 Test 组件中的
<code>ageRef.current</code> 已经更新成最新的值了。不妨看一下输出</p><div><img src="/static/media/hook-5.16282898.jpg"/></div><p>可以看出此时的 <code>ageRef.current</code> 已经是最新的啦</p><h1 id="conclusion">conclusion</h1><p>通过这次场景，分析了一下为什么在 <code>React</code> 中第一次 age 是 null 的原因，也知道了如何来解决这个 null 的问题。</p><p>又是一个愉快的周末呀 😄😌</p></div><footer class="BlogPostLayout_footer__1p0Ii"><h3 class="BlogPostLayout_title__1egAZ"><a class=" " href="/">lanyincao</a></h3><div class="
      Bio_Bio__1eiKY
      BlogPostLayout_bio__2AHhA
    "><img src="/static/media/bio-pic.fdbb64ab.jpeg" alt="lanyincao"/><p>Personal blog by <a href="https://twitter.com/lanyincao">lanyincao</a>.<br/>I can&#x27;t sing, dance, rap but can code, 🏀</p></div><section class="BlogPostLayout_links__1fVhZ"><a class=" " href="/posts/2019-11-16/use-subscription/">← <!-- -->useSubscription</a><a class="BlogPostLayout_next__3tOcG " href="/posts/2019-10-02/the-dep-of-use-hook/">the dep of useHook<!-- --> →</a></section></footer></article></main></div></div><script>!function(o){function e(e){for(var t,r,n=e[0],c=e[1],f=e[2],d=0,a=[];d<n.length;d++)r=n[d],l[r]&&a.push(l[r][0]),l[r]=0;for(t in c)Object.prototype.hasOwnProperty.call(c,t)&&(o[t]=c[t]);for(p&&p(e);a.length;)a.shift()();return i.push.apply(i,f||[]),u()}function u(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,c=1;c<r.length;c++){var f=r[c];0!==l[f]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var r={},a={43:0},l={43:0},i=[];function s(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.e=function(i){var e=[];a[i]?e.push(a[i]):0!==a[i]&&{1:1,23:1}[i]&&e.push(a[i]=new Promise(function(e,n){for(var t="static/css/"+({}[i]||i)+"."+{1:"27c8494b",2:"31d6cfe0",3:"31d6cfe0",4:"31d6cfe0",5:"31d6cfe0",6:"31d6cfe0",7:"31d6cfe0",8:"31d6cfe0",9:"31d6cfe0",10:"31d6cfe0",11:"31d6cfe0",12:"31d6cfe0",13:"31d6cfe0",14:"31d6cfe0",15:"31d6cfe0",16:"31d6cfe0",17:"31d6cfe0",18:"31d6cfe0",19:"31d6cfe0",20:"31d6cfe0",21:"31d6cfe0",22:"31d6cfe0",23:"d3b34b05",24:"31d6cfe0",25:"31d6cfe0",26:"31d6cfe0",27:"31d6cfe0",28:"31d6cfe0",29:"31d6cfe0",30:"31d6cfe0",31:"31d6cfe0",32:"31d6cfe0",33:"31d6cfe0",34:"31d6cfe0",35:"31d6cfe0",36:"31d6cfe0",37:"31d6cfe0",38:"31d6cfe0",39:"31d6cfe0",40:"31d6cfe0",41:"31d6cfe0"}[i]+".chunk.css",c=s.p+t,r=document.getElementsByTagName("link"),f=0;f<r.length;f++){var d=(o=r[f]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(d===t||d===c))return e()}var a=document.getElementsByTagName("style");for(f=0;f<a.length;f++){var o;if((d=(o=a[f]).getAttribute("data-href"))===t||d===c)return e()}var u=document.createElement("link");u.rel="stylesheet",u.type="text/css",u.onload=e,u.onerror=function(e){var t=e&&e.target&&e.target.src||c,r=new Error("Loading CSS chunk "+i+" failed.\n("+t+")");r.request=t,n(r)},u.href=c,document.getElementsByTagName("head")[0].appendChild(u)}).then(function(){a[i]=0}));var r=l[i];if(0!==r)if(r)e.push(r[2]);else{var t=new Promise(function(e,t){r=l[i]=[e,t]});e.push(r[2]=t);var n,c=document.getElementsByTagName("head")[0],f=document.createElement("script");f.charset="utf-8",f.timeout=120,s.nc&&f.setAttribute("nonce",s.nc),f.src=s.p+"static/js/"+({}[i]||i)+"."+{1:"18016ef5",2:"f51ae852",3:"2d812e0c",4:"959e45b9",5:"031228ef",6:"da64b01a",7:"c20265b4",8:"3708fc80",9:"76d5a1f1",10:"64d279dc",11:"15bdaa3d",12:"a289339e",13:"6ed3fae5",14:"c0219476",15:"1b2dfa34",16:"c95df50e",17:"854d2668",18:"fe4e0156",19:"75b2ab08",20:"5cc3e2dd",21:"85a6bb34",22:"f5b6dab9",23:"873b678f",24:"299ad1b2",25:"26732315",26:"8ed938bb",27:"9e08b9c8",28:"8c5bf47d",29:"651315e7",30:"4de03612",31:"a827ef55",32:"9f8e8c89",33:"4e98a6ac",34:"8fa7acd9",35:"f7fd16e7",36:"c8a9136e",37:"7fd46dad",38:"ab859197",39:"242ef20f",40:"a8b763a6",41:"fe59cd2f"}[i]+".chunk.js",n=function(e){f.onerror=f.onload=null,clearTimeout(d);var t=l[i];if(0!==t){if(t){var r=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src,c=new Error("Loading chunk "+i+" failed.\n("+r+": "+n+")");c.type=r,c.request=n,t[1](c)}l[i]=void 0}};var d=setTimeout(function(){n({type:"timeout",target:f})},12e4);f.onerror=f.onload=n,c.appendChild(f)}return Promise.all(e)},s.m=o,s.c=r,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var t=window.webpackJsonp=window.webpackJsonp||[],n=t.push.bind(t);t.push=e,t=t.slice();for(var c=0;c<t.length;c++)e(t[c]);var p=n;u()}([])</script><script src="/static/js/42.e4ff5a7a.chunk.js"></script><script src="/static/js/main.763db4b1.chunk.js"></script></body></html>