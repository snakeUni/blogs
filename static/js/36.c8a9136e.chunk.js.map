{"version":3,"sources":["pages/posts/2019-11-02-a-callback-thinking/document.mdx","pages/posts/2019-11-02-a-callback-thinking/hook-1.jpg","pages/posts/2019-11-02-a-callback-thinking/hook-2.jpg","pages/posts/2019-11-02-a-callback-thinking/hook-3.jpg","pages/posts/2019-11-02-a-callback-thinking/hook-4.jpg","pages/posts/2019-11-02-a-callback-thinking/hook-5.jpg"],"names":["readingTime","text","minutes","time","words","MDXContent","props","_this","Object","_Users_Vae_Desktop_project_my_lanyincaos_cn_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","this","_Users_Vae_Desktop_project_my_lanyincaos_cn_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_Users_Vae_Desktop_project_my_lanyincaos_cn_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","call","layout","_this$props","components","_Users_Vae_Desktop_project_my_lanyincaos_cn_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","_mdx_js_tag__WEBPACK_IMPORTED_MODULE_7__","name","id","parentName","className","data-language","data-highlighted-line-numbers","dangerouslySetInnerHTML","__html","src","require","href","React","Component","tableOfContents","arguments","length","undefined","level","title","children","frontMatter","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/36.c8a9136e.chunk.js","sourcesContent":["\nimport React from 'react'\nimport { MDXTag } from '@mdx-js/tag'\nexport const readingTime = {\"text\":\"3 min read\",\"minutes\":2.755,\"time\":165299.99999999997,\"words\":551}\n\n\nconst layoutProps = {\n  \n};\nexport default class MDXContent extends React.Component {\n  constructor(props) {\n    super(props)\n    this.layout = null\n  }\n  render() {\n    const { components, ...props } = this.props\n\n    return <MDXTag\n             name=\"wrapper\"\n             \n             components={components}><MDXTag name=\"p\" components={components}>{`首先为什么会想到写这篇文章，写这篇文章的由来主要是内部的一个项目导致的，这个引起了我的一些思考。那到底是什么呢？`}</MDXTag>\n<MDXTag name=\"h1\" components={components} props={{\"id\":\"目录\"}}>{`目录`}</MDXTag>\n<MDXTag name=\"ul\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`为什么会出现这种场景`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`如何解决这个场景`}</MDXTag>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`react 内部是如何运作的才会导致这种场景的出现`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"为什么会出现这种场景\"}}>{`为什么会出现这种场景`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`在使用 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`React`}</MDXTag>{` 的时候，父子间是如何通信的，我相信基本上所有人都是知道的，父传递数据给子是通过 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`props`}</MDXTag>{` 的形式`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-jsx\",\"data-language\":\"jsx\",\"data-highlighted-line-numbers\":\"2\",\"dangerouslySetInnerHTML\":{\"__html\":\"<span class=\\\"token keyword\\\">function</span> <span class=\\\"token constant\\\">A</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n<span class=\\\"highlighted-line\\\">  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token constant\\\">B</span> name<span class=\\\"token operator\\\">=</span><span class=\\\"token string\\\">'lanyincao'</span> age<span class=\\\"token operator\\\">=</span><span class=\\\"token string\\\">'18'</span> <span class=\\\"token operator\\\">/</span><span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span></span><span class=\\\"token punctuation\\\">}</span>\\n\"}}}></MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`此时 B 组件接受 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`name`}</MDXTag>{` 和 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`age`}</MDXTag>{` 这两个 props, 在 B 组件内部就可以拿到这两个数据进行相应的处理操作。那么子如何把数据传递给父呢？我们知道应该回调的方式`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-jsx\",\"data-language\":\"jsx\",\"data-highlighted-line-numbers\":\"7,8,9\",\"dangerouslySetInnerHTML\":{\"__html\":\"<span class=\\\"token keyword\\\">function</span> <span class=\\\"token constant\\\">A</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">handleChange</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token parameter\\\">value</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token constant\\\">B</span> onChange<span class=\\\"token operator\\\">=</span><span class=\\\"token punctuation\\\">{</span>handleChange<span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">/</span><span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">function</span> <span class=\\\"token constant\\\">B</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\"><span class=\\\"token punctuation\\\">{</span> onChange <span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n<span class=\\\"highlighted-line\\\">  <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>onChange<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span></span><span class=\\\"highlighted-line\\\">    <span class=\\\"token function\\\">onChange</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'XXXX'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></span><span class=\\\"highlighted-line\\\">  <span class=\\\"token punctuation\\\">}</span></span>  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\"}}}></MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`在 B 组件内部调用 A 组件传递下来的 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`onChange`}</MDXTag>{` 回调，通过 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`onChange`}</MDXTag>{` 再把 B 中的数据反传回去。基本上父子通信就可以很快的完成了。至于其他的方法我在这里不做过多的描述，主要是为了引出\n另一个问题。`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`此时有这样的一个组件的结构。`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-jsx\",\"data-language\":\"jsx\",\"data-highlighted-line-numbers\":\"5,6,7,8\",\"dangerouslySetInnerHTML\":{\"__html\":\"<span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Parent</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\"><span class=\\\"token punctuation\\\">{</span> getAge<span class=\\\"token punctuation\\\">,</span> children <span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'render Parent component'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">[</span>age<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">useState</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">18</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"highlighted-line\\\">  <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>getAge<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span></span><span class=\\\"highlighted-line\\\">    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'getAge:'</span><span class=\\\"token punctuation\\\">,</span> age<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></span><span class=\\\"highlighted-line\\\">    <span class=\\\"token function\\\">getAge</span><span class=\\\"token punctuation\\\">(</span>age<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></span><span class=\\\"highlighted-line\\\">  <span class=\\\"token punctuation\\\">}</span></span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token operator\\\">&lt;</span>div<span class=\\\"token operator\\\">></span>\\n      <span class=\\\"token operator\\\">&lt;</span>span<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">{</span>children<span class=\\\"token punctuation\\\">}</span><span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>span<span class=\\\"token operator\\\">></span>\\n    <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>div<span class=\\\"token operator\\\">></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Node</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\"><span class=\\\"token punctuation\\\">{</span> age <span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'render Node component'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'age:'</span><span class=\\\"token punctuation\\\">,</span> age<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Test</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'render Test component'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">const</span> ageRef <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">useRef</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">[</span>state<span class=\\\"token punctuation\\\">,</span> forceUpdate<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">useState</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token boolean\\\">false</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>state <span class=\\\"token operator\\\">===</span> <span class=\\\"token boolean\\\">true</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'update Test component'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token operator\\\">&lt;</span>Parent getAge<span class=\\\"token operator\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token parameter\\\">age</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span>ageRef<span class=\\\"token punctuation\\\">.</span>current <span class=\\\"token operator\\\">=</span> age<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token operator\\\">></span>\\n      <span class=\\\"token operator\\\">&lt;</span>Node age<span class=\\\"token operator\\\">=</span><span class=\\\"token punctuation\\\">{</span>ageRef<span class=\\\"token punctuation\\\">.</span>current<span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">/</span><span class=\\\"token operator\\\">></span>\\n    <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>Parent<span class=\\\"token operator\\\">></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\nReactDom<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">render</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token operator\\\">&lt;</span>Test <span class=\\\"token operator\\\">/</span><span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">,</span> document<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">getElementById</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'root'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\"}}}></MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Test`}</MDXTag>{` 组件有一个 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`children`}</MDXTag>{` 组件叫做 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Parent`}</MDXTag>{`, 在 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Parent`}</MDXTag>{` 组件内部调用了 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`getAge`}</MDXTag>{` 方法, `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`getAge`}</MDXTag>{` 方法就是一个回调, 通过 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`getAge`}</MDXTag>{` 方法把\nage 返回出去给父组件使用。那么不妨在仔细看下 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Test`}</MDXTag>{` 组件，在调用 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`getAge`}</MDXTag>{` 方法的时候把 age 挂到 ref 上，我们知道在函数中 ref 可以当做和 class 中的 this\n一样去使用，所以在 render Parent 的时候， ageRef.current 就会被赋予新的值, 那么 ageRef.current 被赋予新的值后，是否此时 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Node`}</MDXTag>{` 组件获取到的 age 就是新的值呢？\n不妨看一下输出`}</MDXTag>\n<div>\n  <img src={require('./hook-1.jpg')} />\n</div>\n<MDXTag name=\"p\" components={components}>{`可以看出在 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Node`}</MDXTag>{` 组件中, 此时 age 是 null, 对啊为什么会是 null 呢，不应该啊，如果是 18 应该多好啊。有可能在 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Node`}</MDXTag>{` 组件内部，会使用数字的一些方法，那么如果是 null,\n这样就会导致页面白屏了，就会造成严重的问题。`}</MDXTag>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"如何解决这个场景\"}}>{`如何解决这个场景`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`上面出现的 age is null, 这样的情况，应该如何去解决呢？ 首先我们知道 ageRef 是一个拥有 current 属性的一个对象，那么此时不妨把 ageRef 传递到子组件中，在子组件中使用\n`}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`ageRef.current`}</MDXTag>{` 来获取到新的 age 的值，好了不妨试一下！！！`}</MDXTag>\n<MDXTag name=\"ul\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`传递引用到子组件中`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-jsx\",\"data-language\":\"jsx\",\"data-highlighted-line-numbers\":\"13,22\",\"dangerouslySetInnerHTML\":{\"__html\":\"<span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Parent</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\"><span class=\\\"token punctuation\\\">{</span> getAge<span class=\\\"token punctuation\\\">,</span> children <span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">[</span>age<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">useState</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">18</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>getAge<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'getAge:'</span><span class=\\\"token punctuation\\\">,</span> age<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">getAge</span><span class=\\\"token punctuation\\\">(</span>age<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">&lt;</span>div<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">{</span>children<span class=\\\"token punctuation\\\">}</span><span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>div<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">ResovedNode</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\"><span class=\\\"token punctuation\\\">{</span> age <span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n<span class=\\\"highlighted-line\\\">  console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'age:'</span><span class=\\\"token punctuation\\\">,</span> age<span class=\\\"token punctuation\\\">.</span>current<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></span>  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">ResovedTest</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">const</span> ageRef <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">useRef</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token operator\\\">&lt;</span>Parent getAge<span class=\\\"token operator\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token parameter\\\">age</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span>ageRef<span class=\\\"token punctuation\\\">.</span>current <span class=\\\"token operator\\\">=</span> age<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token operator\\\">></span>\\n<span class=\\\"highlighted-line\\\">      <span class=\\\"token operator\\\">&lt;</span>ResovedNode age<span class=\\\"token operator\\\">=</span><span class=\\\"token punctuation\\\">{</span>ageRef<span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">/</span><span class=\\\"token operator\\\">></span></span>    <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>Parent<span class=\\\"token operator\\\">></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\"}}}></MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`现在传递到 Node 组件中的 age 是 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`ageRef.current`}</MDXTag>{`, 在看看输出`}</MDXTag>\n<div>\n  <img src={require('./hook-2.jpg')} />\n</div>\n<MDXTag name=\"p\" components={components}>{`此时在 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`Node`}</MDXTag>{` 组件中获取到的 ageRef.current 就是正确的值了，为什么，因为在 Parent 中的 ageRef 和传递下去的是同一个引用，所以在 render parent 的时候，\n调用了 getAge 此时 ageRef.current 被修改了。那么当渲染到 Node 的时候，获取到的 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`ageRef`}</MDXTag>{` 就可以拿到在 Parent 组件中的 age 的值了。`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://codesandbox.io/s/yici-huidiaodefenxi-y20cf\"}}>{`try it in codesandbox`}</MDXTag></MDXTag>\n<MDXTag name=\"ul\" components={components}>\n<MDXTag name=\"li\" components={components} parentName=\"ul\">{`传递函数到子组件中`}</MDXTag>\n</MDXTag>\n<MDXTag name=\"p\" components={components}>{`函数是具有懒执行也就是延迟执行的作用，我们可以在任何时候控制函数的执行。所以如何传递一个函数到子组件中是否也可以达到一样的效果呢？`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-jsx\",\"data-language\":\"jsx\",\"data-highlighted-line-numbers\":\"13,22\",\"dangerouslySetInnerHTML\":{\"__html\":\"<span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">Parent</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\"><span class=\\\"token punctuation\\\">{</span> getAge<span class=\\\"token punctuation\\\">,</span> children <span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">const</span> <span class=\\\"token punctuation\\\">[</span>age<span class=\\\"token punctuation\\\">]</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">useState</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">18</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">if</span> <span class=\\\"token punctuation\\\">(</span>getAge<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n    console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'getAge:'</span><span class=\\\"token punctuation\\\">,</span> age<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n    <span class=\\\"token function\\\">getAge</span><span class=\\\"token punctuation\\\">(</span>age<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n  <span class=\\\"token punctuation\\\">}</span>\\n\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token operator\\\">&lt;</span>div<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">{</span>children<span class=\\\"token punctuation\\\">}</span><span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>div<span class=\\\"token operator\\\">></span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">ResovedNode2</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\"><span class=\\\"token punctuation\\\">{</span> age <span class=\\\"token punctuation\\\">}</span></span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n<span class=\\\"highlighted-line\\\">  console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'age:'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token function\\\">age</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></span>  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">ResovedTest2</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">const</span> ageRef <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">useRef</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token keyword\\\">null</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token punctuation\\\">(</span>\\n    <span class=\\\"token operator\\\">&lt;</span>Parent getAge<span class=\\\"token operator\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token parameter\\\">age</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span>ageRef<span class=\\\"token punctuation\\\">.</span>current <span class=\\\"token operator\\\">=</span> age<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">}</span><span class=\\\"token operator\\\">></span>\\n<span class=\\\"highlighted-line\\\">      <span class=\\\"token operator\\\">&lt;</span>ResovedNode2 age<span class=\\\"token operator\\\">=</span><span class=\\\"token punctuation\\\">{</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> ageRef<span class=\\\"token punctuation\\\">.</span>current<span class=\\\"token punctuation\\\">}</span> <span class=\\\"token operator\\\">/</span><span class=\\\"token operator\\\">></span></span>    <span class=\\\"token operator\\\">&lt;</span><span class=\\\"token operator\\\">/</span>Parent<span class=\\\"token operator\\\">></span>\\n  <span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\"}}}></MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`此时传递给 Node 的 age 是一个函数 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`() => ageRef.current`}</MDXTag>{`, 这个函数返回了 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`ageRef.current`}</MDXTag>{`, 因为现在传递给 Node 的是一个函数，而这个函数的执行时机是在 Node 组件的\nrender 时机，所以在 Node 中总是可以拿到新的值。不妨看一下数据`}</MDXTag>\n<div>\n  <img src={require('./hook-3.jpg')} />\n</div>\n<MDXTag name=\"p\" components={components}>{`可以看出此时输出的 age 都是正确的。`}</MDXTag>\n<MDXTag name=\"p\" components={components}><MDXTag name=\"a\" components={components} parentName=\"p\" props={{\"href\":\"https://codesandbox.io/s/yici-huidiaodefenxi-y20cf\"}}>{`try it in codesandbox`}</MDXTag></MDXTag>\n<MDXTag name=\"h2\" components={components} props={{\"id\":\"react-内部是如何运作的才会导致这种场景的出现\"}}>{`react 内部是如何运作的才会导致这种场景的出现`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`在上面的场景中已经知道有两种解决办法，那么不妨考虑一下为什么第一种是不行的呢？那么不妨对 react 进行调试一下就能知道为什么了`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`首先在 react 的源码的 createElement 的内部打印一下`}</MDXTag>\n<MDXTag name=\"pre\" components={components}><MDXTag name=\"code\" components={components} parentName=\"pre\" props={{\"className\":\"language-jsx\",\"data-language\":\"jsx\",\"data-highlighted-line-numbers\":\"\",\"dangerouslySetInnerHTML\":{\"__html\":\"<span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">createElement</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">type<span class=\\\"token punctuation\\\">,</span> config<span class=\\\"token punctuation\\\">,</span> children</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token keyword\\\">var</span> propName<span class=\\\"token punctuation\\\">;</span> <span class=\\\"token comment\\\">// Reserved names are extracted</span>\\n\\n  <span class=\\\"token operator\\\">...</span>some\\n\\n  console<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">log</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'createElement-'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token template-string\\\"><span class=\\\"token template-punctuation string\\\">`</span><span class=\\\"token string\\\">type:</span><span class=\\\"token template-punctuation string\\\">`</span></span><span class=\\\"token punctuation\\\">,</span> type<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">'props:'</span><span class=\\\"token punctuation\\\">,</span> props<span class=\\\"token punctuation\\\">)</span>\\n\\n  <span class=\\\"token keyword\\\">return</span> <span class=\\\"token function\\\">ReactElement</span><span class=\\\"token punctuation\\\">(</span>type<span class=\\\"token punctuation\\\">,</span> key<span class=\\\"token punctuation\\\">,</span> ref<span class=\\\"token punctuation\\\">,</span> self<span class=\\\"token punctuation\\\">,</span> source<span class=\\\"token punctuation\\\">,</span> ReactCurrentOwner<span class=\\\"token punctuation\\\">.</span>current<span class=\\\"token punctuation\\\">,</span> props<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n\"}}}></MDXTag></MDXTag>\n<MDXTag name=\"p\" components={components}>{`为什么要在 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`createElement`}</MDXTag>{` 里面打印呢，我们知道 React 会调用 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`React.createElement`}</MDXTag>{` 返回 ReactElment 对象，调用的是在 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`babel`}</MDXTag>{` 插件中做的，具体\n可以去看一下插件。可以主动调用 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`React.createElement`}</MDXTag>{`, 也可以写成 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`JSX`}</MDXTag>{` 的形式， React 会自行解析。那不妨看一下此时的输出`}</MDXTag>\n<div>\n  <img src={require('./hook-4.jpg')} />\n</div>\n<MDXTag name=\"p\" components={components}>{`从输入可以看出在调用 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`createElement`}</MDXTag>{` 的时候, 此时 Node 的 props 已经确定了， 此时的 age 是 null, 所以当 render Node 组件的时候，此时的 age 就是 null,\n这就是为什么拿不到最新的值的原因了，因为 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`createElement`}</MDXTag>{` 的时候已经确定了这个 props 的值。如果后续发生 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`update`}</MDXTag>{`, 会继续调用 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`createElement`}</MDXTag>{`, 此时 Test 组件中的\n`}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`ageRef.current`}</MDXTag>{` 已经更新成最新的值了。不妨看一下输出`}</MDXTag>\n<div>\n  <img src={require('./hook-5.jpg')} />\n</div>\n<MDXTag name=\"p\" components={components}>{`可以看出此时的 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`ageRef.current`}</MDXTag>{` 已经是最新的啦`}</MDXTag>\n<MDXTag name=\"h1\" components={components} props={{\"id\":\"conclusion\"}}>{`conclusion`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`通过这次场景，分析了一下为什么在 `}<MDXTag name=\"inlineCode\" components={components} parentName=\"p\">{`React`}</MDXTag>{` 中第一次 age 是 null 的原因，也知道了如何来解决这个 null 的问题。`}</MDXTag>\n<MDXTag name=\"p\" components={components}>{`又是一个愉快的周末呀 😄😌`}</MDXTag>\n           </MDXTag>\n  }\n}\nexport const tableOfContents = (components={}) => [\n  {\n    id: \"为什么会出现这种场景\",\n    level: 2,\n    title: \"为什么会出现这种场景\",\n    children: [\n        \n      ]\n  },\n{\n    id: \"如何解决这个场景\",\n    level: 2,\n    title: \"如何解决这个场景\",\n    children: [\n        \n      ]\n  },\n{\n    id: \"react-内部是如何运作的才会导致这种场景的出现\",\n    level: 2,\n    title: \"react 内部是如何运作的才会导致这种场景的出现\",\n    children: [\n        \n      ]\n  }\n]\n\nexport const frontMatter = {}\n\n","module.exports = __webpack_public_path__ + \"static/media/hook-1.5eadc3d4.jpg\";","module.exports = __webpack_public_path__ + \"static/media/hook-2.a9921c74.jpg\";","module.exports = __webpack_public_path__ + \"static/media/hook-3.25ce9ca0.jpg\";","module.exports = __webpack_public_path__ + \"static/media/hook-4.8834fdd9.jpg\";","module.exports = __webpack_public_path__ + \"static/media/hook-5.16282898.jpg\";"],"sourceRoot":""}