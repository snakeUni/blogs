(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{79:function(n,a,s){"use strict";s.r(a),s.d(a,"readingTime",function(){return k}),s.d(a,"default",function(){return m}),s.d(a,"tableOfContents",function(){return g}),s.d(a,"frontMatter",function(){return d});var t=s(13),e=s(18),p=s(19),o=s(21),c=s(20),u=s(22),l=s(0),r=s.n(l),i=s(17),k={text:"2 min read",minutes:1.235,time:74100.00000000001,words:247},m=function(n){function a(n){var s;return Object(e.a)(this,a),(s=Object(o.a)(this,Object(c.a)(a).call(this,n))).layout=null,s}return Object(u.a)(a,n),Object(p.a)(a,[{key:"render",value:function(){var n=this.props,a=n.components;Object(t.a)(n,["components"]);return r.a.createElement(i.MDXTag,{name:"wrapper",components:a},r.a.createElement(i.MDXTag,{name:"h1",components:a,props:{id:"reactforwardref"}},"React.forwardRef"),r.a.createElement(i.MDXTag,{name:"p",components:a},r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"forwardRef")," \u4e3b\u8981\u76ee\u7684\u662f\u4e3a\u4e86\u89e3\u51b3\u9ad8\u9636\u7ec4\u4ef6\u4e2d\u65e0\u6cd5\u62ff\u5230ref\u7684\u95ee\u9898\uff0c\u4ee5\u53ca\u5728\u51fd\u6570\u5f0f\u7ec4\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u76f4\u63a5\u62ff\u5230\u539f\u751f\u7684DOM\u5143\u7d20  ",r.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://reactjs.org/docs/react-api.html#reactforwardref"}},"forwardRef"),"  "),r.a.createElement(i.MDXTag,{name:"p",components:a},"\u63a5\u4e0b\u6765\u4e3b\u8981\u770b\u4e0b ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"forwardRef")," \u7684\u7528\u6cd5\uff0c\u4ee5\u53ca\u5728 ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"hooks")," \u4e2d\u7684\u76f8\u5173\u7528\u6cd5"),r.a.createElement(i.MDXTag,{name:"h2",components:a,props:{id:"\u9ad8\u9636\u7ec4\u4ef6\u4e2d\u7684-ref"}},"\u9ad8\u9636\u7ec4\u4ef6\u4e2d\u7684 ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"h2"},"ref")),r.a.createElement(i.MDXTag,{name:"p",components:a},"\u5728\u7c7b\u7ec4\u4ef6\u4e2d\uff0c \u60f3\u8981\u8c03\u7528\u539f\u751f\u7684\u4e8b\u4ef6\uff0c \u6211\u4eec\u7684\u505a\u6cd5\u901a\u5e38\u662f\u66b4\u9732\u4e00\u4e2a\u65b9\u6cd5\uff0c \u5728\u65b9\u6cd5\u5185\u90e8\u8c03\u7528\u539f\u751f\u7684\u65b9\u6cd5\uff0c \u6bd4\u5982 ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"input")," \u7684 ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"focus")," \u4e8b\u4ef6"),r.a.createElement(i.MDXTag,{name:"pre",components:a},r.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">class</span> <span class="token class-name">Input</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n\n  <span class="token function-variable function">focus</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>inputRef<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">el</span> <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span>inputRef <span class="token operator">=</span> el<span class="token punctuation">}</span></span><span class="token punctuation">/></span></span>\n    <span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n'}}})),r.a.createElement(i.MDXTag,{name:"p",components:a},"\u5728\u7ec4\u4ef6\u5916\u90e8\uff0c \u60f3\u8981\u4e3b\u52a8\u4f7f ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"input")," \u805a\u7126 "),r.a.createElement(i.MDXTag,{name:"pre",components:a},r.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">const</span> testRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>testRef<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>\n\ntestRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n'}}})),r.a.createElement(i.MDXTag,{name:"p",components:a},"\u7528\u8fc7\u4f20\u9012 ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"ref"),", \u8c03\u7528\u7ec4\u4ef6\u5185\u90e8\u7684 ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"focus")," \u65b9\u6cd5\uff0c \u4f7f ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"input")," \u4e3b\u52a8\u805a\u7126  "),r.a.createElement(i.MDXTag,{name:"p",components:a},"\u90a3\u5982\u679c\u6b64\u65f6\u6709\u4e00\u4e2a\u9ad8\u9636\u7ec4\u4ef6\u5c01\u88c5\u4e86\u8fd9\u4e2a ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"Input")," \u7ec4\u4ef6 \u5982\u4f55\u8c03\u7528 ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"focus")," \u4f7f input \u4e3b\u52a8\u805a\u7126  "),r.a.createElement(i.MDXTag,{name:"pre",components:a},r.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">function</span> <span class="token function">Hoc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token punctuation">/></span></span>\n<span class="token punctuation">}</span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hoc</span></span> <span class="token punctuation">/></span></span>\n'}}})),r.a.createElement(i.MDXTag,{name:"p",components:a},"\u6b64\u65f6\uff0c \u5982\u4f55\u8c03\u7528 ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"Input")," \u91cc\u7684 ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"focus")," \u65b9\u6cd5\uff0c \u4f3c\u4e4e\u662f\u6ca1\u6709\u529e\u6cd5(\u4e5f\u6709\u53ef\u80fd\u662f\u6211\u4e0d\u77e5\u9053), ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"forwardRef")," \u7531\u6b64\u800c\u751f"),r.a.createElement(i.MDXTag,{name:"pre",components:a},r.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">const</span> testRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n\n<span class="token keyword">function</span> <span class="token function">Hoc</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">props</span><span class="token punctuation">}</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span><span class="token punctuation">/></span></span>\n<span class="token punctuation">}</span>\n\nReact<span class="token punctuation">.</span><span class="token function">forwardRef</span><span class="token punctuation">(</span>Hoc<span class="token punctuation">)</span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hoc</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>testRef<span class="token punctuation">}</span></span><span class="token punctuation">/></span></span>\n\ntestRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n'}}})),r.a.createElement(i.MDXTag,{name:"p",components:a},"\u6b64\u65f6 ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"testRef.current.focus()")," \u5c31\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\uff0c \u4f7f ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"input")," \u805a\u7126"),r.a.createElement(i.MDXTag,{name:"h2",components:a,props:{id:"\u51fd\u6570\u5f0f\u7ec4\u4ef6--\u76f4\u63a5\u64cd\u4f5c-dom"}},"\u51fd\u6570\u5f0f\u7ec4\u4ef6  \u76f4\u63a5\u64cd\u4f5c ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"h2"},"DOM")),r.a.createElement(i.MDXTag,{name:"p",components:a},"\u6211\u4eec\u4e0d\u59a8\u628a  ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"Input")," \u6539\u6b63\u51fd\u6570\u5f0f\u7ec4\u4ef6"),r.a.createElement(i.MDXTag,{name:"pre",components:a},r.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">const</span> <span class="token function-variable function">Input</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token spread"><span class="token punctuation">{</span><span class="token punctuation">...</span><span class="token attr-value">props</span><span class="token punctuation">}</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span><span class="token punctuation">/></span></span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span>Input<span class="token punctuation">)</span>\n'}}})),r.a.createElement(i.MDXTag,{name:"p",components:a},"\u6b64\u65f6 ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"Input")," \u7684 ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"ref")," \u76f4\u63a5\u6302\u5728\u5230 ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"DOM")," \u4e0a\u4e86\uff0c \u4e3a\u4e86\u4f7f ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"input")," \u805a\u7126"),r.a.createElement(i.MDXTag,{name:"pre",components:a},r.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">const</span> inputRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span><span class="token punctuation">/></span></span>\n\ninputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// \u805a\u7126 \ud83d\ude0a</span>\ninputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">blur</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// \u5931\u7126 \ud83d\ude08</span>\n'}}})),r.a.createElement(i.MDXTag,{name:"h2",components:a,props:{id:"hooks-\u4e2d\u4f7f\u7528"}},"hooks \u4e2d\u4f7f\u7528"),r.a.createElement(i.MDXTag,{name:"p",components:a},"\u5982\u679c\u60f3\u8981\u8fbe\u5230\u548c ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"class")," \u76f8\u540c\u7684\u6548\u679c\uff0c \u5728\u51fd\u6570\u4e2d\u8be5\u5982\u4f55\u505a, ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"hooks")," \u63d0\u4f9b\u4e86\u76f8\u5e94\u7684api"),r.a.createElement(i.MDXTag,{name:"pre",components:a},r.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">function</span> <span class="token function">Input</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> inputRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  React<span class="token punctuation">.</span><span class="token function">useImperativeHandle</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>\n    <span class="token function-variable function">focus</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token function-variable function">blur</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">blur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span>Input<span class="token punctuation">)</span><span class="token punctuation">;</span>\n'}}})),r.a.createElement(i.MDXTag,{name:"p",components:a},"\u4f7f\u7528 ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"Input")),r.a.createElement(i.MDXTag,{name:"pre",components:a},r.a.createElement(i.MDXTag,{name:"code",components:a,parentName:"pre",props:{className:"language-jsx","data-language":"jsx","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">const</span> inputRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>\n\ninputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// \u805a\u7126 \ud83d\ude0a</span>\ninputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">blur</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// \u5931\u7126 \ud83d\ude08</span>\n'}}})),r.a.createElement(i.MDXTag,{name:"p",components:a},"\u60f3\u8981\u8be6\u7ec6\u4e86\u89e3\uff0c \u524d\u5f80 ",r.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://reactjs.org/docs/react-api.html#reactforwardref"}},"\u5b98\u7f51")," "),r.a.createElement(i.MDXTag,{name:"p",components:a},r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"React")," \u5b98\u7f51\u56e2\u961f \u6709\u4e86\u65b0\u7684",r.a.createElement(i.MDXTag,{name:"a",components:a,parentName:"p",props:{href:"https://github.com/reactjs/rfcs/pull/107#issuecomment-466304382"}},"\u63d0\u8bae"),"\u53ef\u80fd\u4f1a\u89e3\u51b3 ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:a,parentName:"p"},"forwardRef")," \u8fd9\u79cd\u590d\u6742\u7684\u7528\u6cd5"))}}]),a}(r.a.Component),g=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{id:"\u9ad8\u9636\u7ec4\u4ef6\u4e2d\u7684-ref",level:2,title:r.a.createElement(r.a.Fragment,null,"\u9ad8\u9636\u7ec4\u4ef6\u4e2d\u7684 ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:n},"ref")),children:[]},{id:"\u51fd\u6570\u5f0f\u7ec4\u4ef6--\u76f4\u63a5\u64cd\u4f5c-dom",level:2,title:r.a.createElement(r.a.Fragment,null,"\u51fd\u6570\u5f0f\u7ec4\u4ef6  \u76f4\u63a5\u64cd\u4f5c ",r.a.createElement(i.MDXTag,{name:"inlineCode",components:n},"DOM")),children:[]},{id:"hooks-\u4e2d\u4f7f\u7528",level:2,title:"hooks \u4e2d\u4f7f\u7528",children:[]}]},d={}}}]);
//# sourceMappingURL=26.8ed938bb.chunk.js.map